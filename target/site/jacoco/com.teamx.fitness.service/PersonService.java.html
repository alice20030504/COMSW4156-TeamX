<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PersonService.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Personal Fitness Management Service</a> &gt; <a href="index.source.html" class="el_package">com.teamx.fitness.service</a> &gt; <span class="el_source">PersonService.java</span></div><h1>PersonService.java</h1><pre class="source lang-java linenums">package com.teamx.fitness.service;

import com.teamx.fitness.model.PersonSimple;
import org.springframework.stereotype.Service;

import java.time.LocalDate;
import java.time.Period;

/**
 * Service for managing person-related operations.
 * Provides business logic for fitness calculations.
 */
@Service
<span class="fc" id="L14">public class PersonService {</span>

    /**
     * Calculate BMI (Body Mass Index).
     * Formula: BMI = weight(kg) / (height(m))^2
     *
     * @param weight weight in kilograms
     * @param height height in centimeters
     * @return calculated BMI
     */
    public Double calculateBMI(Double weight, Double height) {
<span class="fc bfc" id="L25" title="All 6 branches covered.">        if (weight == null || height == null || height == 0) {</span>
<span class="fc" id="L26">            return null;</span>
        }
<span class="fc" id="L28">        double heightInMeters = height / 100.0;</span>
<span class="fc" id="L29">        return weight / (heightInMeters * heightInMeters);</span>
    }

    /**
     * Calculate age from birth date.
     *
     * @param birthDate person's birth date
     * @return age in years
     */
    public Integer calculateAge(LocalDate birthDate) {
<span class="fc bfc" id="L39" title="All 2 branches covered.">        if (birthDate == null) {</span>
<span class="fc" id="L40">            return null;</span>
        }
<span class="fc" id="L42">        return Period.between(birthDate, LocalDate.now()).getYears();</span>
    }

    /**
     * Calculate Basal Metabolic Rate (BMR) using Harris-Benedict equation.
     * Men: BMR = 88.362 + (13.397 × weight in kg) + (4.799 × height in cm) - (5.677 × age in years)
     * Women: BMR = 447.593 + (9.247 × weight in kg) + (3.098 × height in cm) - (4.330 × age in years)
     *
     * @param weight weight in kilograms
     * @param height height in centimeters
     * @param age age in years
     * @param isMale true for male, false for female
     * @return calculated BMR
     */
    public Double calculateBMR(Double weight, Double height, Integer age, boolean isMale) {
<span class="fc bfc" id="L57" title="All 6 branches covered.">        if (weight == null || height == null || age == null) {</span>
<span class="fc" id="L58">            return null;</span>
        }

<span class="fc bfc" id="L61" title="All 2 branches covered.">        if (isMale) {</span>
<span class="fc" id="L62">            return 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);</span>
        } else {
<span class="fc" id="L64">            return 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);</span>
        }
    }

    /**
     * Calculate daily calorie needs based on BMR and activity level.
     *
     * @param bmr Basal Metabolic Rate
     * @param weeklyTrainingFreq weekly training frequency
     * @return daily calorie needs
     */
    public Double calculateDailyCalorieNeeds(Double bmr, Integer weeklyTrainingFreq) {
<span class="fc bfc" id="L76" title="All 4 branches covered.">        if (bmr == null || weeklyTrainingFreq == null) {</span>
<span class="fc" id="L77">            return null;</span>
        }

        // Activity factor based on weekly training frequency
        double activityFactor;
<span class="fc bfc" id="L82" title="All 2 branches covered.">        if (weeklyTrainingFreq == 0) {</span>
<span class="fc" id="L83">            activityFactor = 1.2; // Sedentary</span>
<span class="fc bfc" id="L84" title="All 2 branches covered.">        } else if (weeklyTrainingFreq &lt;= 2) {</span>
<span class="fc" id="L85">            activityFactor = 1.375; // Light activity</span>
<span class="fc bfc" id="L86" title="All 2 branches covered.">        } else if (weeklyTrainingFreq &lt;= 4) {</span>
<span class="fc" id="L87">            activityFactor = 1.55; // Moderate activity</span>
<span class="fc bfc" id="L88" title="All 2 branches covered.">        } else if (weeklyTrainingFreq &lt;= 6) {</span>
<span class="fc" id="L89">            activityFactor = 1.725; // Very active</span>
        } else {
<span class="fc" id="L91">            activityFactor = 1.9; // Extra active</span>
        }

<span class="fc" id="L94">        return bmr * activityFactor;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>