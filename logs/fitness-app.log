2025-10-23 16:40:29 [main] INFO  c.t.f.FitnessManagementApplication - Starting FitnessManagementApplication using Java 17.0.8 with PID 368 (C:\Users\ZHANG Shurong\Desktop\Master1\COMS W4156 Advance Software Engineering\COMSW4156-TeamX\target\classes started by ZHANG Shurong in C:\Users\ZHANG Shurong\Desktop\Master1\COMS W4156 Advance Software Engineering\COMSW4156-TeamX)
2025-10-23 16:40:29 [main] DEBUG c.t.f.FitnessManagementApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-23 16:40:29 [main] INFO  c.t.f.FitnessManagementApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-23 16:40:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-23 16:40:32 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 494 ms. Found 1 JPA repository interface.
2025-10-23 16:40:33 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-23 16:40:33 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-23 16:40:33 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-23 16:40:33 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-23 16:40:33 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4029 ms
2025-10-23 16:40:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-23 16:40:34 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:fitnessdb user=SA
2025-10-23 16:40:34 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-23 16:40:34 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:fitnessdb'
2025-10-23 16:40:34 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-23 16:40:34 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-10-23 16:40:34 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-23 16:40:35 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-23 16:40:35 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-23 16:40:37 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-23 16:40:37 [main] DEBUG org.hibernate.SQL - 
    drop table if exists api_logs cascade 
2025-10-23 16:40:37 [main] DEBUG org.hibernate.SQL - 
    drop table if exists persons_simple cascade 
2025-10-23 16:40:37 [main] DEBUG org.hibernate.SQL - 
    create table api_logs (
        response_status integer,
        id bigint generated by default as identity,
        response_time bigint,
        timestamp timestamp(6) not null,
        client_id varchar(255) not null,
        endpoint varchar(255) not null,
        error_message varchar(255),
        http_method varchar(255) not null,
        ip_address varchar(255),
        request_payload TEXT,
        user_agent varchar(255),
        primary key (id)
    )
2025-10-23 16:40:37 [main] DEBUG org.hibernate.SQL - 
    create table persons_simple (
        birth_date date not null,
        height float(53) not null,
        weight float(53) not null,
        id bigint generated by default as identity,
        client_id varchar(255) not null,
        name varchar(255) not null,
        primary key (id)
    )
2025-10-23 16:40:37 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-23 16:40:39 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-23 16:40:39 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 19 mappings in 'requestMappingHandlerMapping'
2025-10-23 16:40:39 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-10-23 16:40:39 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-23 16:40:39 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-23 16:40:40 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-10-23 16:40:40 [main] INFO  c.t.f.FitnessManagementApplication - Started FitnessManagementApplication in 11.796 seconds (process running for 12.807)
2025-10-23 16:40:40 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-23 16:40:40 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-23 16:40:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-10-23 16:40:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-10-23 16:40:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-10-23 16:40:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@45dfb6a4
2025-10-23 16:40:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3ef04239
2025-10-23 16:40:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-23 16:40:40 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-10-23 16:40:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/persons/calories?weight=75.5&height=180.0&age=34&gender=male&weeklyTrainingFreq=4", parameters={masked}
2025-10-23 16:40:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.teamx.fitness.controller.PersonController#calculateDailyCalories(Double, Double, Integer, String, Integer)
2025-10-23 16:40:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-23 16:40:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{bmr=1770.6375000000003, dailyCalories=2744.4881250000003, weeklyTrainingFreq=4}]
2025-10-23 16:40:40 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-23 16:40:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/persons/1?birthDate=1990-05-15", parameters={masked}
2025-10-23 16:40:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.teamx.fitness.controller.PersonController#getPersonById(Long, String)
2025-10-23 16:40:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        ps1_0.id 
    from
        persons_simple ps1_0 
    where
        ps1_0.id=? 
        and ps1_0.birth_date=? 
    fetch
        first ? rows only
2025-10-23 16:40:41 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        ps1_0.id,
        ps1_0.birth_date,
        ps1_0.client_id,
        ps1_0.height,
        ps1_0.name,
        ps1_0.weight 
    from
        persons_simple ps1_0 
    where
        ps1_0.id=? 
        and ps1_0.client_id=?
2025-10-23 16:40:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-23 16:40:41 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.teamx.fitness.model.PersonSimple@5db54ff4]
2025-10-23 16:40:41 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-23 16:40:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/research/persons", parameters={}
2025-10-23 16:40:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.teamx.fitness.controller.ResearchController#getAllUsersAnonymized()
2025-10-23 16:40:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-23 16:40:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{dataAnonymized=true, totalUsers=1523, accessLevel=RESEARCH_ONLY, containsPII=false, privacyComplian (truncated)...]
2025-10-23 16:40:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-23 16:40:41 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/research/demographics?ageRange=25-34&gender=male&objective=BULK", parameters={masked}
2025-10-23 16:40:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.teamx.fitness.controller.ResearchController#getDemographicStats(String, String, String)
2025-10-23 16:40:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-23 16:40:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{dataAnonymized=true, cohort={ageRange=25-34, meetsPrivacyThreshold=true, gender=male, sampleSize=15 (truncated)...]
2025-10-23 16:40:41 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-23 16:40:41 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/research/workout-patterns?ageRange=25-34", parameters={masked}
2025-10-23 16:40:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.teamx.fitness.controller.ResearchController#getWorkoutPatterns(String)
2025-10-23 16:40:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-23 16:40:41 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{ageRange=25-34, privacyProtected=true, exerciseDistribution={AEROBIC=45.0, MIXED=5.0, FLEXIBILITY=1 (truncated)...]
2025-10-23 16:40:41 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-23 16:40:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/research/nutrition-trends?objective=BULK", parameters={masked}
2025-10-23 16:40:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.teamx.fitness.controller.ResearchController#getNutritionTrends(String)
2025-10-23 16:40:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-23 16:40:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{dataType=AGGREGATED, containsPII=false, macroDistribution={averageCalories=3200, carbs=45, protein= (truncated)...]
2025-10-23 16:40:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-23 16:40:41 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/research/population-health", parameters={}
2025-10-23 16:40:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.teamx.fitness.controller.ResearchController#getPopulationHealth()
2025-10-23 16:40:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-23 16:40:41 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{dataProtection=All data is aggregated and anonymized, totalPopulation=1523, goalMetrics={weightLoss (truncated)...]
2025-10-23 16:40:41 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-23 16:40:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/research/persons", parameters={}
2025-10-23 16:40:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.teamx.fitness.controller.ResearchController#getAllUsersAnonymized()
2025-10-23 16:40:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.teamx.fitness.config.GlobalExceptionHandler#handleResponseStatusException(ResponseStatusException)
2025-10-23 16:40:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-23 16:40:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{error=Forbidden, message=Mobile clients are not authorized to access research endpoints. Research e (truncated)...]
2025-10-23 16:40:41 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.server.ResponseStatusException: 403 FORBIDDEN "Mobile clients are not authorized to access research endpoints. Research endpoints are restricted to research-tool clients only."]
2025-10-23 16:40:41 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 403 FORBIDDEN
